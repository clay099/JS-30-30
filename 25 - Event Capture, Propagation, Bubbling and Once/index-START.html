<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Understanding JavaScript's Capture</title>
</head>

<body class="bod">

  <div class="one">
    <div class="two">
      <div class="three">
      </div>
    </div>
  </div>

  <style>
    html {
      box-sizing: border-box;
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    div {
      width: 100%;
      padding: 100px;
    }

    .one {
      background: thistle;
    }

    .two {
      background: mistyrose;
    }

    .three {
      background: coral;
    }
  </style>

  <button></button>
  <script>
    const divs = document.querySelectorAll('div');
    const button = document.querySelector('button')


    function logText(e) {
      //once event is found stop bubbling up parent elements
      // e.stopPropagation()
      console.log(this.classList.value)
    }

    // "capture: true" runs functions on the way down. Default is set to false and is an optional parameter 
    // "once:true" will listen for event and the unbind itself (similar to remove event listener), if you keep firing the event there is no listener so nothing further will fire past the first time
    divs.forEach(div => div.addEventListener(
      'click', logText, { capture: false, once: true }
    ));

    button.addEventListener('click', () => { console.log('Clicked!!!') }, { once: false })

  </script>
</body>

</html>